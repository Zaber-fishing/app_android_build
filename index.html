<!DOCTYPE html>
<html lang="sk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

    <!-- FIX: Updated deprecated meta tag -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0A2239">
    <title>ZÁBER - Rybársky portál</title>

    <!-- App Icon (SVG Data URI for immediate preview) -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><rect width='512' height='512' fill='%230A2239' rx='120'/><path d='M360 140h-40c-15 0-25 15-18 30l15 30c5 10 0 25-15 25h-60L160 360c-20 35 15 65 45 50l40-20c15-8 25 5 20 20l-10 30c-10 30-60 20-60-20v-40' fill='none' stroke='%23D97706' stroke-width='40' stroke-linecap='round' stroke-linejoin='round'/><circle cx='360' cy='140' r='30' fill='%23D97706'/></svg>">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R8BC97E52J"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-R8BC97E52J');
    </script>

    <!-- CRITICAL FIX: Polyfills for Android WebView -->
    <script>
        window.process = { env: { NODE_ENV: 'production' } };
        window.global = window;
        window.onerror = function (msg, url, line, col, error) {
            if (msg && msg.includes && msg.includes('ResizeObserver')) return;
            // console.error("SYSTEM ERROR:\n" + msg); // Uncomment for debugging
        };
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,400;1,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script type="importmap">
{
  "imports": {
    "leaflet": "https://esm.sh/leaflet@^1.9.4",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "firebase/": "https://esm.sh/firebase@^12.7.0/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3",
    "vite": "https://esm.sh/vite@^7.3.1",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2",
    "@google/genai": "https://esm.sh/@google/genai@^1.35.0",
    "@capacitor/cli": "https://esm.sh/@capacitor/cli@^8.0.0"
  }
}
</script>
</head>

<body class="mesh-bg">
    <div id="root"></div>
    <!-- FIX: Changed /index.tsx to ./index.tsx to fix MIME type error in APK -->
    <script type="module" src="./index.tsx"></script>
</body>

</html>